"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1181],{714:function(e,t,n){var o=n(2739),r=n(1376),d=n(7145),a=n(4354),i=n(9039),w=n(7138),c=n(7975),g=n(720),u=n(729),l=n(1038),s=n(9247),Z=n(5265),f=n(5469),v=n(5528),y=n(9847),h=n(5783),m=n(2010),p=n(1372),k=new m.Z({source:new y.Z}),P=new h.Z({wrapX:!1}),I=new p.Z({source:P,style:function(e){var t=new i.ZP({image:new w.Z({radius:8,fill:new c.Z({color:"rgba(255, 0, 0, 0.2)"}),stroke:new g.Z({color:"red",width:1})}),text:new u.Z({text:e.get("node").id.toString(),fill:new c.Z({color:"red"}),stroke:new g.Z({color:"white",width:3})})});return[t]}}),F=new h.Z({wrapX:!1}),b=new p.Z({source:F,style:function(e){var t=new i.ZP({stroke:new g.Z({color:"blue",width:1}),text:new u.Z({text:e.get("edge").id.toString(),fill:new c.Z({color:"blue"}),stroke:new g.Z({color:"white",width:2})})});return[t]}}),B=new h.Z({wrapX:!1}),x=new p.Z({source:B,style:function(e){var t=new i.ZP({stroke:new g.Z({color:"black",width:1}),fill:new c.Z({color:"rgba(0, 255, 0, 0.2)"}),text:new u.Z({font:"bold 12px sans-serif",text:e.get("face").id.toString(),fill:new c.Z({color:"green"}),stroke:new g.Z({color:"white",width:2})})});return[t]}}),E=new r.Z({layers:[k,x,b,I],target:"map",view:new a.ZP({center:[-11e6,46e5],zoom:16})}),N=topolis.createTopology();function S(e,t){var n=e.getFeatureById(t.id);e.removeFeature(n)}function C(e,t){var n=e.getEdgeByPoint(t,5)[0];return n?e.modEdgeSplit(n,t):e.addIsoNode(t)}N.on("addnode",(function(e){var t=new o.Z({geometry:new f.Z(e.coordinate),node:e});t.setId(e.id),P.addFeature(t)})),N.on("removenode",(function(e){S(P,e)})),N.on("addedge",(function(e){var t=new o.Z({geometry:new Z.Z(e.coordinates),edge:e});t.setId(e.id),F.addFeature(t)})),N.on("modedge",(function(e){F.getFeatureById(e.id).setGeometry(new Z.Z(e.coordinates))})),N.on("removeedge",(function(e){S(F,e)})),N.on("addface",(function(e){var t=N.getFaceGeometry(e),n=new o.Z({geometry:new v.ZP(t),face:e});n.setId(e.id),B.addFeature(n)})),N.on("removeface",(function(e){S(B,e)}));var G=new l.ZP({type:"LineString"});G.on("drawend",(function(e){var t,n,o=e.feature.getGeometry().getCoordinates(),r=o[0],d=o[o.length-1];try{t=N.getNodeByPoint(r),n=N.getNodeByPoint(d);var a=N.getEdgeByPoint(r,5),i=N.getEdgeByPoint(d,5),w=N.getEdgesByLine(o);if(1===w.length&&!t&&!n&&0===a.length&&0===i.length)return N.remEdgeNewFace(w[0]),(t=w[0].start).face&&N.removeIsoNode(t),void((n=w[0].end).face&&N.removeIsoNode(n));t||(t=C(N,r),o[0]=t.coordinate),n||(n=C(N,d),o[o.length-1]=n.coordinate),N.addEdgeNewFaces(t,n,o)}catch(e){toastr.warning(e.toString())}})),E.addInteraction(G);var X=new s.Z({source:F});E.addInteraction(X),E.addControl(new d.Z)}},function(e){var t=function(t){return e(e.s=t)};t(9877),t(714)}]);
//# sourceMappingURL=topolis.js.map