{"version":3,"file":"kml-earthquakes.js","mappings":"2MAQMA,EAAa,GA2BbC,EAAS,IAAIC,EAAAA,EAAY,CAC7BC,OAAQ,IAAIC,EAAAA,EAAa,CACvBC,IAAK,qCACLC,OAAQ,IAAIC,EAAAA,GAAI,CACdC,eAAe,MAGnBC,MAjCoB,SAAUC,GAI9B,IAAMC,EAAOD,EAAQE,IAAI,QAEnBC,EAAS,EAAI,IADDC,WAAWH,EAAKI,OAAO,IACJ,GACjCN,EAAQT,EAAWa,GAgBvB,OAfKJ,IACHA,EAAQ,IAAIO,EAAAA,GAAM,CAChBC,MAAO,IAAIC,EAAAA,EAAY,CACrBL,OAAQA,EACRM,KAAM,IAAIC,EAAAA,EAAK,CACbC,MAAO,2BAETC,OAAQ,IAAIC,EAAAA,EAAO,CACjBF,MAAO,yBACPG,MAAO,QAIbxB,EAAWa,GAAUJ,GAEhBA,KAaHgB,EAAS,IAAIC,EAAAA,EAAU,CAC3BvB,OAAQ,IAAIwB,EAAAA,EAAO,CACjBC,MAAO,YAILC,EAAM,IAAIC,EAAAA,EAAI,CAClBC,OAAQ,CAACN,EAAQxB,GACjB+B,OAAQ,MACRC,KAAM,IAAIC,EAAAA,GAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,MAIJC,EAAOC,EAAE,SACfD,EAAKE,QAAQ,CACXC,WAAW,EACXC,QAAS,WAGX,IAAMC,EAAqB,SAAUC,GACnCN,EAAKO,IAAI,CACPC,KAAMF,EAAM,GAAK,KACjBG,IAAKH,EAAM,GAAK,GAAK,OAEvB,IAAMjC,EAAUmB,EAAIkB,sBAAsBJ,GAAO,SAAUjC,GACzD,OAAOA,KAELA,EACF2B,EAAKW,KAAK,sBAAuBtC,EAAQE,IAAI,SAAS2B,QAAQ,QAE9DF,EAAKE,QAAQ,SAIjBV,EAAIoB,GAAG,eAAe,SAAUC,GAC1BA,EAAIC,SACNd,EAAKE,QAAQ,QAGfG,EAAmBb,EAAIuB,cAAcF,EAAIG,mBAG3CxB,EAAIoB,GAAG,SAAS,SAAUC,GACxBR,EAAmBQ,EAAIP,Y","sources":["webpack:///./kml-earthquakes.js"],"sourcesContent":["import KML from '../src/ol/format/KML.js';\nimport Map from '../src/ol/Map.js';\nimport Stamen from '../src/ol/source/Stamen.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport View from '../src/ol/View.js';\nimport {Circle as CircleStyle, Fill, Stroke, Style} from '../src/ol/style.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\n\nconst styleCache = {};\nconst styleFunction = function (feature) {\n  // 2012_Earthquakes_Mag5.kml stores the magnitude of each earthquake in a\n  // standards-violating <magnitude> tag in each Placemark.  We extract it from\n  // the Placemark's name instead.\n  const name = feature.get('name');\n  const magnitude = parseFloat(name.substr(2));\n  const radius = 5 + 20 * (magnitude - 5);\n  let style = styleCache[radius];\n  if (!style) {\n    style = new Style({\n      image: new CircleStyle({\n        radius: radius,\n        fill: new Fill({\n          color: 'rgba(255, 153, 0, 0.4)',\n        }),\n        stroke: new Stroke({\n          color: 'rgba(255, 204, 0, 0.2)',\n          width: 1,\n        }),\n      }),\n    });\n    styleCache[radius] = style;\n  }\n  return style;\n};\n\nconst vector = new VectorLayer({\n  source: new VectorSource({\n    url: 'data/kml/2012_Earthquakes_Mag5.kml',\n    format: new KML({\n      extractStyles: false,\n    }),\n  }),\n  style: styleFunction,\n});\n\nconst raster = new TileLayer({\n  source: new Stamen({\n    layer: 'toner',\n  }),\n});\n\nconst map = new Map({\n  layers: [raster, vector],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2,\n  }),\n});\n\nconst info = $('#info');\ninfo.tooltip({\n  animation: false,\n  trigger: 'manual',\n});\n\nconst displayFeatureInfo = function (pixel) {\n  info.css({\n    left: pixel[0] + 'px',\n    top: pixel[1] - 15 + 'px',\n  });\n  const feature = map.forEachFeatureAtPixel(pixel, function (feature) {\n    return feature;\n  });\n  if (feature) {\n    info.attr('data-original-title', feature.get('name')).tooltip('show');\n  } else {\n    info.tooltip('hide');\n  }\n};\n\nmap.on('pointermove', function (evt) {\n  if (evt.dragging) {\n    info.tooltip('hide');\n    return;\n  }\n  displayFeatureInfo(map.getEventPixel(evt.originalEvent));\n});\n\nmap.on('click', function (evt) {\n  displayFeatureInfo(evt.pixel);\n});\n"],"names":["styleCache","vector","VectorLayer","source","VectorSource","url","format","KML","extractStyles","style","feature","name","get","radius","parseFloat","substr","Style","image","CircleStyle","fill","Fill","color","stroke","Stroke","width","raster","TileLayer","Stamen","layer","map","Map","layers","target","view","View","center","zoom","info","$","tooltip","animation","trigger","displayFeatureInfo","pixel","css","left","top","forEachFeatureAtPixel","attr","on","evt","dragging","getEventPixel","originalEvent"],"sourceRoot":""}