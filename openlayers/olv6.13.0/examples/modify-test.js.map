{"version":3,"file":"modify-test.js","mappings":"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","sources":["webpack:///./modify-test.js"],"sourcesContent":["import GeoJSON from '../src/ol/format/GeoJSON.js';\nimport Map from '../src/ol/Map.js';\nimport VectorLayer from '../src/ol/layer/Vector.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport View from '../src/ol/View.js';\nimport {Circle as CircleStyle, Fill, Stroke, Style} from '../src/ol/style.js';\nimport {\n  Modify,\n  Select,\n  defaults as defaultInteractions,\n} from '../src/ol/interaction.js';\n\nconst styleFunction = (function () {\n  const styles = {};\n  const image = new CircleStyle({\n    radius: 5,\n    fill: null,\n    stroke: new Stroke({color: 'orange', width: 2}),\n  });\n  styles['Point'] = new Style({image: image});\n  styles['Polygon'] = new Style({\n    stroke: new Stroke({\n      color: 'blue',\n      width: 3,\n    }),\n    fill: new Fill({\n      color: 'rgba(0, 0, 255, 0.1)',\n    }),\n  });\n  styles['MultiLineString'] = new Style({\n    stroke: new Stroke({\n      color: 'green',\n      width: 3,\n    }),\n  });\n  styles['MultiPolygon'] = new Style({\n    stroke: new Stroke({\n      color: 'yellow',\n      width: 1,\n    }),\n    fill: new Fill({\n      color: 'rgba(255, 255, 0, 0.1)',\n    }),\n  });\n  styles['default'] = new Style({\n    stroke: new Stroke({\n      color: 'red',\n      width: 3,\n    }),\n    fill: new Fill({\n      color: 'rgba(255, 0, 0, 0.1)',\n    }),\n    image: image,\n  });\n  return function (feature) {\n    return styles[feature.getGeometry().getType()] || styles['default'];\n  };\n})();\n\nconst geojsonObject = {\n  'type': 'FeatureCollection',\n  'crs': {\n    'type': 'name',\n    'properties': {\n      'name': 'EPSG:3857',\n    },\n  },\n  'features': [\n    {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'Point',\n        'coordinates': [0, 0],\n      },\n    },\n    {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'MultiPoint',\n        'coordinates': [\n          [-2e6, 0],\n          [0, -2e6],\n        ],\n      },\n    },\n    {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'LineString',\n        'coordinates': [\n          [4e6, -2e6],\n          [8e6, 2e6],\n          [9e6, 2e6],\n        ],\n      },\n    },\n    {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'LineString',\n        'coordinates': [\n          [4e6, -2e6],\n          [8e6, 2e6],\n          [8e6, 3e6],\n        ],\n      },\n    },\n    {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'Polygon',\n        'coordinates': [\n          [\n            [-5e6, -1e6],\n            [-4e6, 1e6],\n            [-3e6, -1e6],\n            [-5e6, -1e6],\n          ],\n          [\n            [-4.5e6, -0.5e6],\n            [-3.5e6, -0.5e6],\n            [-4e6, 0.5e6],\n            [-4.5e6, -0.5e6],\n          ],\n        ],\n      },\n    },\n    {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'MultiLineString',\n        'coordinates': [\n          [\n            [-1e6, -7.5e5],\n            [-1e6, 7.5e5],\n          ],\n          [\n            [-1e6, -7.5e5],\n            [-1e6, 7.5e5],\n            [-5e5, 0],\n            [-1e6, -7.5e5],\n          ],\n          [\n            [1e6, -7.5e5],\n            [15e5, 0],\n            [15e5, 0],\n            [1e6, 7.5e5],\n          ],\n          [\n            [-7.5e5, -1e6],\n            [7.5e5, -1e6],\n          ],\n          [\n            [-7.5e5, 1e6],\n            [7.5e5, 1e6],\n          ],\n        ],\n      },\n    },\n    {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'MultiPolygon',\n        'coordinates': [\n          [\n            [\n              [-5e6, 6e6],\n              [-5e6, 8e6],\n              [-3e6, 8e6],\n              [-3e6, 6e6],\n              [-5e6, 6e6],\n            ],\n          ],\n          [\n            [\n              [-3e6, 6e6],\n              [-2e6, 8e6],\n              [0, 8e6],\n              [0, 6e6],\n              [-3e6, 6e6],\n            ],\n          ],\n          [\n            [\n              [1e6, 6e6],\n              [1e6, 8e6],\n              [3e6, 8e6],\n              [3e6, 6e6],\n              [1e6, 6e6],\n            ],\n          ],\n        ],\n      },\n    },\n    {\n      'type': 'Feature',\n      'geometry': {\n        'type': 'GeometryCollection',\n        'geometries': [\n          {\n            'type': 'LineString',\n            'coordinates': [\n              [-5e6, -5e6],\n              [0, -5e6],\n            ],\n          },\n          {\n            'type': 'Point',\n            'coordinates': [4e6, -5e6],\n          },\n          {\n            'type': 'Polygon',\n            'coordinates': [\n              [\n                [1e6, -5e6],\n                [2e6, -3.5e6],\n                [3e6, -5e6],\n                [1e6, -5e6],\n              ],\n            ],\n          },\n          {\n            'type': 'Polygon',\n            'coordinates': [\n              [\n                [1e6, -5e6],\n                [2e6, -6.5e6],\n                [3e6, -5e6],\n                [1e6, -5e6],\n              ],\n            ],\n          },\n        ],\n      },\n    },\n  ],\n};\n\nconst source = new VectorSource({\n  features: new GeoJSON().readFeatures(geojsonObject),\n});\n\nconst layer = new VectorLayer({\n  source: source,\n  style: styleFunction,\n});\n\nconst overlayStyle = (function () {\n  const styles = {};\n  styles['Polygon'] = [\n    new Style({\n      fill: new Fill({\n        color: [255, 255, 255, 0.5],\n      }),\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: [255, 255, 255, 1],\n        width: 5,\n      }),\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: [0, 153, 255, 1],\n        width: 3,\n      }),\n    }),\n  ];\n  styles['MultiPolygon'] = styles['Polygon'];\n\n  styles['LineString'] = [\n    new Style({\n      stroke: new Stroke({\n        color: [255, 255, 255, 1],\n        width: 5,\n      }),\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: [0, 153, 255, 1],\n        width: 3,\n      }),\n    }),\n  ];\n  styles['MultiLineString'] = styles['LineString'];\n\n  styles['Point'] = [\n    new Style({\n      image: new CircleStyle({\n        radius: 7,\n        fill: new Fill({\n          color: [0, 153, 255, 1],\n        }),\n        stroke: new Stroke({\n          color: [255, 255, 255, 0.75],\n          width: 1.5,\n        }),\n      }),\n      zIndex: 100000,\n    }),\n  ];\n  styles['MultiPoint'] = styles['Point'];\n\n  styles['GeometryCollection'] = styles['Polygon'].concat(styles['Point']);\n\n  return function (feature) {\n    return styles[feature.getGeometry().getType()];\n  };\n})();\n\nconst select = new Select({\n  style: overlayStyle,\n});\n\nconst modify = new Modify({\n  features: select.getFeatures(),\n  style: overlayStyle,\n  insertVertexCondition: function () {\n    // prevent new vertices to be added to the polygons\n    return !select\n      .getFeatures()\n      .getArray()\n      .every(function (feature) {\n        return feature\n          .getGeometry()\n          .getType()\n          .match(/Polygon/);\n      });\n  },\n});\n\nconst map = new Map({\n  interactions: defaultInteractions().extend([select, modify]),\n  layers: [layer],\n  target: 'map',\n  view: new View({\n    center: [0, 1000000],\n    zoom: 2,\n    multiWorld: true,\n  }),\n});\n"],"names":["styles","image","styleFunction","CircleStyle","radius","fill","stroke","Stroke","color","width","Style","Fill","feature","getGeometry","getType","source","VectorSource","features","GeoJSON","readFeatures","layer","VectorLayer","style","overlayStyle","zIndex","concat","select","Select","modify","Modify","getFeatures","insertVertexCondition","getArray","every","match","Map","interactions","defaultInteractions","extend","layers","target","view","View","center","zoom","multiWorld"],"sourceRoot":""}