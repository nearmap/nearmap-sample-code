{"version":3,"file":"feature-animation.js","mappings":"mPAYMA,EAAY,IAAIC,EAAAA,EAAU,CAC9BC,OAAQ,IAAIC,EAAAA,EAAI,CACdC,OAAO,MAILF,EAAS,IAAIG,EAAAA,EAAa,CAC9BD,OAAO,IAEHE,EAAS,IAAIC,EAAAA,EAAY,CAC7BL,OAAQA,IAGJM,EAAM,IAAIC,EAAAA,EAAI,CAClBC,OAAQ,CAACV,EAAWM,GACpBK,OAAQ,MACRC,KAAM,IAAIC,EAAAA,GAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,EACNC,YAAY,MAgDhBd,EAAOe,GAAG,cAAc,SAAUC,GAnClC,IAAeC,EACPC,EACAC,EACAC,EAHOH,EAoCPD,EAAEC,QAnCFC,EAAQG,KAAKC,MACbH,EAAYF,EAAQM,cAAcC,QAClCJ,EAActB,EAAUiB,GAAG,cAEjC,SAAiBU,GACf,IACMC,EADaD,EAAME,WACEC,KAAOV,EAClC,GAAIQ,GATS,KAUXG,EAAAA,EAAAA,GAAQT,OADV,CAIA,IAAMU,GAAgBC,EAAAA,EAAAA,IAAiBN,GACjCO,EAAeN,EAdR,IAgBPO,EAAiC,IAAxBC,EAAAA,EAAAA,IAAQF,GAAqB,EACtCG,GAAUD,EAAAA,EAAAA,IAAQ,EAAIF,GAEtBI,EAAQ,IAAIC,EAAAA,GAAM,CACtBC,MAAO,IAAIC,EAAAA,EAAY,CACrBN,OAAQA,EACRO,OAAQ,IAAIC,EAAAA,EAAO,CACjBC,MAAO,mBAAqBP,EAAU,IACtCQ,MAAO,IAAOR,QAKpBL,EAAcc,SAASR,GACvBN,EAAce,aAAa1B,GAE3Bb,EAAIwC,gBAQRC,OAAOC,aAhDP,WACE,IAAMC,EAAoB,IAAhBC,KAAKC,SAAiB,IAC1BC,EAAoB,IAAhBF,KAAKC,SAAiB,GAC1BE,EAAO,IAAIC,EAAAA,GAAMC,EAAAA,EAAAA,IAAW,CAACN,EAAGG,KAChCnC,EAAU,IAAIuC,EAAAA,EAAQH,GAC5BrD,EAAOyD,WAAWxC,KA2CiB,O","sources":["webpack:///./feature-animation.js"],"sourcesContent":["import Feature from '../src/ol/Feature.js';\nimport Map from '../src/ol/Map.js';\nimport Point from '../src/ol/geom/Point.js';\nimport View from '../src/ol/View.js';\nimport {Circle as CircleStyle, Stroke, Style} from '../src/ol/style.js';\nimport {OSM, Vector as VectorSource} from '../src/ol/source.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport {easeOut} from '../src/ol/easing.js';\nimport {fromLonLat} from '../src/ol/proj.js';\nimport {getVectorContext} from '../src/ol/render.js';\nimport {unByKey} from '../src/ol/Observable.js';\n\nconst tileLayer = new TileLayer({\n  source: new OSM({\n    wrapX: false,\n  }),\n});\n\nconst source = new VectorSource({\n  wrapX: false,\n});\nconst vector = new VectorLayer({\n  source: source,\n});\n\nconst map = new Map({\n  layers: [tileLayer, vector],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 1,\n    multiWorld: true,\n  }),\n});\n\nfunction addRandomFeature() {\n  const x = Math.random() * 360 - 180;\n  const y = Math.random() * 170 - 85;\n  const geom = new Point(fromLonLat([x, y]));\n  const feature = new Feature(geom);\n  source.addFeature(feature);\n}\n\nconst duration = 3000;\nfunction flash(feature) {\n  const start = Date.now();\n  const flashGeom = feature.getGeometry().clone();\n  const listenerKey = tileLayer.on('postrender', animate);\n\n  function animate(event) {\n    const frameState = event.frameState;\n    const elapsed = frameState.time - start;\n    if (elapsed >= duration) {\n      unByKey(listenerKey);\n      return;\n    }\n    const vectorContext = getVectorContext(event);\n    const elapsedRatio = elapsed / duration;\n    // radius will be 5 at start and 30 at end.\n    const radius = easeOut(elapsedRatio) * 25 + 5;\n    const opacity = easeOut(1 - elapsedRatio);\n\n    const style = new Style({\n      image: new CircleStyle({\n        radius: radius,\n        stroke: new Stroke({\n          color: 'rgba(255, 0, 0, ' + opacity + ')',\n          width: 0.25 + opacity,\n        }),\n      }),\n    });\n\n    vectorContext.setStyle(style);\n    vectorContext.drawGeometry(flashGeom);\n    // tell OpenLayers to continue postrender animation\n    map.render();\n  }\n}\n\nsource.on('addfeature', function (e) {\n  flash(e.feature);\n});\n\nwindow.setInterval(addRandomFeature, 1000);\n"],"names":["tileLayer","TileLayer","source","OSM","wrapX","VectorSource","vector","VectorLayer","map","Map","layers","target","view","View","center","zoom","multiWorld","on","e","feature","start","flashGeom","listenerKey","Date","now","getGeometry","clone","event","elapsed","frameState","time","unByKey","vectorContext","getVectorContext","elapsedRatio","radius","easeOut","opacity","style","Style","image","CircleStyle","stroke","Stroke","color","width","setStyle","drawGeometry","render","window","setInterval","x","Math","random","y","geom","Point","fromLonLat","Feature","addFeature"],"sourceRoot":""}