{"version":3,"file":"tile-load-events.js","mappings":"sIAUA,SAASA,EAASC,GAChBC,KAAKD,GAAKA,EACVC,KAAKC,QAAU,EACfD,KAAKE,OAAS,EAMhBJ,EAASK,UAAUC,WAAa,WACT,IAAjBJ,KAAKC,SACPD,KAAKK,SAELL,KAAKC,QACPD,KAAKM,UAMPR,EAASK,UAAUI,UAAY,WAC7B,IAAMC,EAAQR,KACdS,YAAW,aACPD,EAAMN,OACRM,EAAMF,WACL,MAMLR,EAASK,UAAUG,OAAS,WAC1B,IAAMI,GAAUV,KAAKE,OAASF,KAAKC,QAAW,KAAKU,QAAQ,GAAK,IAEhE,GADAX,KAAKD,GAAGa,MAAMF,MAAQA,EAClBV,KAAKC,UAAYD,KAAKE,OAAQ,CAChCF,KAAKC,QAAU,EACfD,KAAKE,OAAS,EACd,IAAMM,EAAQR,KACdS,YAAW,WACTD,EAAMK,SACL,OAOPf,EAASK,UAAUE,KAAO,WACxBL,KAAKD,GAAGa,MAAME,WAAa,WAM7BhB,EAASK,UAAUU,KAAO,WACpBb,KAAKC,UAAYD,KAAKE,SACxBF,KAAKD,GAAGa,MAAME,WAAa,SAC3Bd,KAAKD,GAAGa,MAAMF,MAAQ,IAI1B,IAAMK,EAAW,IAAIjB,EAASkB,SAASC,eAAe,aAOhDC,EAAS,IAAIC,EAAAA,EAAI,CACrBC,aAJA,4LAKAC,IAAK,8FACLC,SAAU,MAGZJ,EAAOK,GAAG,iBAAiB,WACzBR,EAASX,gBAGXc,EAAOK,GAAG,eAAe,WACvBR,EAASR,eAEXW,EAAOK,GAAG,iBAAiB,WACzBR,EAASR,eAGC,IAAIiB,EAAAA,EAAI,CAClBC,OAAQ,CAAC,IAAIC,EAAAA,EAAU,CAACR,OAAQA,KAChCS,OAAQ,MACRC,KAAM,IAAIC,EAAAA,GAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,Q","sources":["webpack:///./tile-load-events.js"],"sourcesContent":["import Map from '../src/ol/Map.js';\nimport TileLayer from '../src/ol/layer/Tile.js';\nimport View from '../src/ol/View.js';\nimport XYZ from '../src/ol/source/XYZ.js';\n\n/**\n * Renders a progress bar.\n * @param {HTMLElement} el The target element.\n * @class\n */\nfunction Progress(el) {\n  this.el = el;\n  this.loading = 0;\n  this.loaded = 0;\n}\n\n/**\n * Increment the count of loading tiles.\n */\nProgress.prototype.addLoading = function () {\n  if (this.loading === 0) {\n    this.show();\n  }\n  ++this.loading;\n  this.update();\n};\n\n/**\n * Increment the count of loaded tiles.\n */\nProgress.prototype.addLoaded = function () {\n  const this_ = this;\n  setTimeout(function () {\n    ++this_.loaded;\n    this_.update();\n  }, 100);\n};\n\n/**\n * Update the progress bar.\n */\nProgress.prototype.update = function () {\n  const width = ((this.loaded / this.loading) * 100).toFixed(1) + '%';\n  this.el.style.width = width;\n  if (this.loading === this.loaded) {\n    this.loading = 0;\n    this.loaded = 0;\n    const this_ = this;\n    setTimeout(function () {\n      this_.hide();\n    }, 500);\n  }\n};\n\n/**\n * Show the progress bar.\n */\nProgress.prototype.show = function () {\n  this.el.style.visibility = 'visible';\n};\n\n/**\n * Hide the progress bar.\n */\nProgress.prototype.hide = function () {\n  if (this.loading === this.loaded) {\n    this.el.style.visibility = 'hidden';\n    this.el.style.width = 0;\n  }\n};\n\nconst progress = new Progress(document.getElementById('progress'));\n\nconst key = 'get_your_own_D6rA4zTHduk6KOKTXzGB';\nconst attributions =\n  '<a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> ' +\n  '<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>';\n\nconst source = new XYZ({\n  attributions: attributions,\n  url: 'https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=' + key,\n  tileSize: 512,\n});\n\nsource.on('tileloadstart', function () {\n  progress.addLoading();\n});\n\nsource.on('tileloadend', function () {\n  progress.addLoaded();\n});\nsource.on('tileloaderror', function () {\n  progress.addLoaded();\n});\n\nconst map = new Map({\n  layers: [new TileLayer({source: source})],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2,\n  }),\n});\n"],"names":["Progress","el","this","loading","loaded","prototype","addLoading","show","update","addLoaded","this_","setTimeout","width","toFixed","style","hide","visibility","progress","document","getElementById","source","XYZ","attributions","url","tileSize","on","Map","layers","TileLayer","target","view","View","center","zoom"],"sourceRoot":""}