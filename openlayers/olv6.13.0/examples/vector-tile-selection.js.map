{"version":3,"file":"vector-tile-selection.js","mappings":"6KAQIA,EAAY,GAEVC,EAAU,IAAIC,EAAAA,GAAM,CACxBC,OAAQ,IAAIC,EAAAA,EAAO,CACjBC,MAAO,OACPC,MAAO,IAETC,KAAM,IAAIC,EAAAA,EAAK,CACbH,MAAO,yBAGLI,EAAkB,IAAIP,EAAAA,GAAM,CAChCC,OAAQ,IAAIC,EAAAA,EAAO,CACjBC,MAAO,sBACPC,MAAO,IAETC,KAAM,IAAIC,EAAAA,EAAK,CACbH,MAAO,0BAILK,EAAU,IAAIC,EAAAA,EAAgB,CAClCC,WAAW,EACXC,OAAQ,IAAIC,EAAAA,EAAiB,CAC3BC,QAAS,GACTC,OAAQ,IAAIC,EAAAA,EAAI,CACdC,WAAY,WAEdC,IACE,wHAGJC,MAAOnB,IAGHoB,EAAM,IAAIC,EAAAA,EAAI,CAClBC,OAAQ,CAACb,GACTc,OAAQ,MACRC,KAAM,IAAIC,EAAAA,GAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,EACNC,YAAY,MAKVC,EAAiB,IAAInB,EAAAA,EAAgB,CACzCU,IAAKA,EACLU,WAAY,SACZlB,OAAQH,EAAQsB,YAChBZ,MAAO,SAAUa,GACf,GAAIA,EAAQC,UAAWlC,EACrB,OAAOS,KAKP0B,EAAgBC,SAASC,eAAe,QAE9ChB,EAAIiB,GAAG,CAAC,QAAS,gBAAgB,SAAUC,GAEd,uBAAxBJ,EAAcK,OACE,gBAAfD,EAAME,MACiB,uBAAxBN,EAAcK,OACE,gBAAfD,EAAME,MAIV/B,EAAQgC,YAAYH,EAAMI,OAAOC,MAAK,SAAUC,GAC9C,IAAKA,EAASC,OAGZ,OAFA9C,EAAY,QACZ8B,EAAeiB,UAGjB,IAAMd,EAAUY,EAAS,GACzB,GAAKZ,EAAL,CAGA,IAAMe,EAAMf,EAAQC,QAEgC,IAAhDC,EAAcK,MAAMS,QAAQ,kBAC9BjD,EAAY,IAGdA,EAAUgD,GAAOf,EAEjBH,EAAeiB,mB","sources":["webpack:///./vector-tile-selection.js"],"sourcesContent":["import MVT from '../src/ol/format/MVT.js';\nimport Map from '../src/ol/Map.js';\nimport VectorTileLayer from '../src/ol/layer/VectorTile.js';\nimport VectorTileSource from '../src/ol/source/VectorTile.js';\nimport View from '../src/ol/View.js';\nimport {Fill, Stroke, Style} from '../src/ol/style.js';\n\n// lookup for selection objects\nlet selection = {};\n\nconst country = new Style({\n  stroke: new Stroke({\n    color: 'gray',\n    width: 1,\n  }),\n  fill: new Fill({\n    color: 'rgba(20,20,20,0.9)',\n  }),\n});\nconst selectedCountry = new Style({\n  stroke: new Stroke({\n    color: 'rgba(200,20,20,0.8)',\n    width: 2,\n  }),\n  fill: new Fill({\n    color: 'rgba(200,20,20,0.4)',\n  }),\n});\n\nconst vtLayer = new VectorTileLayer({\n  declutter: true,\n  source: new VectorTileSource({\n    maxZoom: 15,\n    format: new MVT({\n      idProperty: 'iso_a3',\n    }),\n    url:\n      'https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/' +\n      'ne:ne_10m_admin_0_countries@EPSG%3A900913@pbf/{z}/{x}/{-y}.pbf',\n  }),\n  style: country,\n});\n\nconst map = new Map({\n  layers: [vtLayer],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2,\n    multiWorld: true,\n  }),\n});\n\n// Selection\nconst selectionLayer = new VectorTileLayer({\n  map: map,\n  renderMode: 'vector',\n  source: vtLayer.getSource(),\n  style: function (feature) {\n    if (feature.getId() in selection) {\n      return selectedCountry;\n    }\n  },\n});\n\nconst selectElement = document.getElementById('type');\n\nmap.on(['click', 'pointermove'], function (event) {\n  if (\n    (selectElement.value === 'singleselect-hover' &&\n      event.type !== 'pointermove') ||\n    (selectElement.value !== 'singleselect-hover' &&\n      event.type === 'pointermove')\n  ) {\n    return;\n  }\n  vtLayer.getFeatures(event.pixel).then(function (features) {\n    if (!features.length) {\n      selection = {};\n      selectionLayer.changed();\n      return;\n    }\n    const feature = features[0];\n    if (!feature) {\n      return;\n    }\n    const fid = feature.getId();\n\n    if (selectElement.value.indexOf('singleselect') === 0) {\n      selection = {};\n    }\n    // add selected feature to lookup\n    selection[fid] = feature;\n\n    selectionLayer.changed();\n  });\n});\n"],"names":["selection","country","Style","stroke","Stroke","color","width","fill","Fill","selectedCountry","vtLayer","VectorTileLayer","declutter","source","VectorTileSource","maxZoom","format","MVT","idProperty","url","style","map","Map","layers","target","view","View","center","zoom","multiWorld","selectionLayer","renderMode","getSource","feature","getId","selectElement","document","getElementById","on","event","value","type","getFeatures","pixel","then","features","length","changed","fid","indexOf"],"sourceRoot":""}