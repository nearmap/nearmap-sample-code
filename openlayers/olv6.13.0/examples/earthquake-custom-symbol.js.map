{"version":3,"file":"earthquake-custom-symbol.js","mappings":"8FAmBIA,E,iIATEC,EAAS,CACb,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,GAAI,GACL,CAAC,EAAG,GACJ,CAAC,EAAG,GACJ,CAAC,EAAG,IAGAC,EAAgB,SAAUC,GAC9B,MAAO,CAACA,EAAW,GAAKH,EAAOG,EAAW,GAAKH,IAG3CI,EAAa,GAmCbC,EAAS,IAAIC,EAAAA,EAAY,CAC7BC,OAAQ,IAAIC,EAAAA,EAAa,CACvBC,IAAK,qCACLC,OAAQ,IAAIC,EAAAA,GAAI,CACdC,eAAe,MAGnBC,MAzCoB,SAAUC,GAI9B,IAAMC,EAAOD,EAAQE,IAAI,QACnBC,EAAYC,WAAWH,EAAKI,OAAO,IACnCC,EAAOC,SAAS,GAAK,IAAMJ,EAAY,GAAI,IACjDjB,EAAQoB,EAAO,GACf,IAAIP,EAAQT,EAAWgB,GACvB,IAAKP,EAAO,CACV,IAAMS,EAASC,SAASC,cAAc,UAChCC,GAAgBC,EAAAA,EAAAA,IAAUJ,EAAOK,WAAW,MAAO,CACvDP,KAAM,CAACA,EAAMA,GACbQ,WAAY,IAEdH,EAAcI,SACZ,IAAIC,EAAAA,GAAM,CACRC,KAAM,IAAIC,EAAAA,EAAK,CAACC,MAAO,2BACvBC,OAAQ,IAAIC,EAAAA,EAAO,CAACF,MAAO,yBAA0BG,MAAO,OAGhEX,EAAcY,aAAa,IAAIC,EAAAA,GAAQ,CAACrC,EAAOsC,IAAIrC,MACnDW,EAAQ,IAAIiB,EAAAA,GAAM,CAChBU,MAAO,IAAIC,EAAAA,EAAK,CACdC,IAAKpB,EACLqB,QAAS,CAACvB,EAAMA,GAChBwB,SAAU,QAGdxC,EAAWgB,GAAQP,EAErB,OAAOA,KAaHgC,EAAS,IAAIC,EAAAA,EAAU,CAC3BvC,OAAQ,IAAIwC,EAAAA,EAAO,CACjBC,MAAO,YAIC,IAAIC,EAAAA,EAAI,CAClBC,OAAQ,CAACL,EAAQxC,GACjB8C,OAAQ,MACRC,KAAM,IAAIC,EAAAA,GAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,Q","sources":["webpack:///./earthquake-custom-symbol.js"],"sourcesContent":["import KML from '../src/ol/format/KML.js';\nimport Map from '../src/ol/Map.js';\nimport Polygon from '../src/ol/geom/Polygon.js';\nimport Stamen from '../src/ol/source/Stamen.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport View from '../src/ol/View.js';\nimport {Fill, Icon, Stroke, Style} from '../src/ol/style.js';\nimport {Tile as TileLayer, Vector as VectorLayer} from '../src/ol/layer.js';\nimport {toContext} from '../src/ol/render.js';\n\nconst symbol = [\n  [0, 0],\n  [4, 2],\n  [6, 0],\n  [10, 5],\n  [6, 3],\n  [4, 5],\n  [0, 0],\n];\nlet scale;\nconst scaleFunction = function (coordinate) {\n  return [coordinate[0] * scale, coordinate[1] * scale];\n};\n\nconst styleCache = {};\nconst styleFunction = function (feature) {\n  // 2012_Earthquakes_Mag5.kml stores the magnitude of each earthquake in a\n  // standards-violating <magnitude> tag in each Placemark.  We extract it from\n  // the Placemark's name instead.\n  const name = feature.get('name');\n  const magnitude = parseFloat(name.substr(2));\n  const size = parseInt(10 + 40 * (magnitude - 5), 10);\n  scale = size / 10;\n  let style = styleCache[size];\n  if (!style) {\n    const canvas = document.createElement('canvas');\n    const vectorContext = toContext(canvas.getContext('2d'), {\n      size: [size, size],\n      pixelRatio: 1,\n    });\n    vectorContext.setStyle(\n      new Style({\n        fill: new Fill({color: 'rgba(255, 153, 0, 0.4)'}),\n        stroke: new Stroke({color: 'rgba(255, 204, 0, 0.2)', width: 2}),\n      })\n    );\n    vectorContext.drawGeometry(new Polygon([symbol.map(scaleFunction)]));\n    style = new Style({\n      image: new Icon({\n        img: canvas,\n        imgSize: [size, size],\n        rotation: 1.2,\n      }),\n    });\n    styleCache[size] = style;\n  }\n  return style;\n};\n\nconst vector = new VectorLayer({\n  source: new VectorSource({\n    url: 'data/kml/2012_Earthquakes_Mag5.kml',\n    format: new KML({\n      extractStyles: false,\n    }),\n  }),\n  style: styleFunction,\n});\n\nconst raster = new TileLayer({\n  source: new Stamen({\n    layer: 'toner',\n  }),\n});\n\nconst map = new Map({\n  layers: [raster, vector],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2,\n  }),\n});\n"],"names":["scale","symbol","scaleFunction","coordinate","styleCache","vector","VectorLayer","source","VectorSource","url","format","KML","extractStyles","style","feature","name","get","magnitude","parseFloat","substr","size","parseInt","canvas","document","createElement","vectorContext","toContext","getContext","pixelRatio","setStyle","Style","fill","Fill","color","stroke","Stroke","width","drawGeometry","Polygon","map","image","Icon","img","imgSize","rotation","raster","TileLayer","Stamen","layer","Map","layers","target","view","View","center","zoom"],"sourceRoot":""}