{"version":3,"file":"wms-time.js","mappings":"0JAQA,SAASA,IACP,OAAO,IAAIC,KAAwC,KAAnCC,KAAKC,MAAMF,KAAKG,MAAQ,MAAqB,OAG/D,IAAMC,GAASC,E,QAAAA,IAAgB,EAAE,IAAK,IAAK,GAAI,IAAK,YAAa,aAC7DC,EAAYP,IAEZQ,EAAc,KAEZC,EAAS,CACb,IAAIC,EAAAA,EAAU,CACZC,OAAQ,IAAIC,EAAAA,EAAO,CACjBC,MAAO,cAGX,IAAIH,EAAAA,EAAU,CACZL,OAAQA,EACRM,OAAQ,IAAIG,EAAAA,EAAQ,CAClBC,aAAc,CAAC,yBACfC,IAAK,iEACLC,OAAQ,CAAC,OAAU,wBAIb,IAAIC,EAAAA,EAAI,CAClBT,OAAQA,EACRU,OAAQ,MACRC,KAAM,IAAIC,EAAAA,GAAK,CACbC,QAAQC,EAAAA,EAAAA,IAAUlB,GAClBmB,KAAM,MAIV,SAASC,IACIC,SAASC,eAAe,QAChCC,UAAYrB,EAAUsB,cAG3B,SAASC,IACPvB,EAAUwB,WAAWxB,EAAUyB,aAAe,IAC1CzB,EAAYN,KAAKG,QACnBG,EAAYP,KAEdS,EAAO,GAAGwB,YAAYC,aAAa,CAAC,KAAQ3B,EAAUsB,gBACtDJ,IAEFK,IAEA,IAAMK,EAAO,WACS,OAAhB3B,IACF4B,OAAOC,cAAc7B,GACrBA,EAAc,OASEkB,SAASC,eAAe,QAChCW,iBAAiB,SANhB,WACXH,IACA3B,EAAc4B,OAAOG,YAAYT,EAAS,QAIA,GAEzBJ,SAASC,eAAe,SAChCW,iBAAiB,QAASH,GAAM,GAE3CV,M","sources":["webpack:///./wms-time.js"],"sourcesContent":["import Map from '../src/ol/Map.js';\nimport Stamen from '../src/ol/source/Stamen.js';\nimport TileLayer from '../src/ol/layer/Tile.js';\nimport TileWMS from '../src/ol/source/TileWMS.js';\nimport View from '../src/ol/View.js';\nimport {getCenter} from '../src/ol/extent.js';\nimport {transformExtent} from '../src/ol/proj.js';\n\nfunction threeHoursAgo() {\n  return new Date(Math.round(Date.now() / 3600000) * 3600000 - 3600000 * 3);\n}\n\nconst extent = transformExtent([-126, 24, -66, 50], 'EPSG:4326', 'EPSG:3857');\nlet startDate = threeHoursAgo();\nconst frameRate = 0.5; // frames per second\nlet animationId = null;\n\nconst layers = [\n  new TileLayer({\n    source: new Stamen({\n      layer: 'terrain',\n    }),\n  }),\n  new TileLayer({\n    extent: extent,\n    source: new TileWMS({\n      attributions: ['Iowa State University'],\n      url: 'https://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r-t.cgi',\n      params: {'LAYERS': 'nexrad-n0r-wmst'},\n    }),\n  }),\n];\nconst map = new Map({\n  layers: layers,\n  target: 'map',\n  view: new View({\n    center: getCenter(extent),\n    zoom: 4,\n  }),\n});\n\nfunction updateInfo() {\n  const el = document.getElementById('info');\n  el.innerHTML = startDate.toISOString();\n}\n\nfunction setTime() {\n  startDate.setMinutes(startDate.getMinutes() + 15);\n  if (startDate > Date.now()) {\n    startDate = threeHoursAgo();\n  }\n  layers[1].getSource().updateParams({'TIME': startDate.toISOString()});\n  updateInfo();\n}\nsetTime();\n\nconst stop = function () {\n  if (animationId !== null) {\n    window.clearInterval(animationId);\n    animationId = null;\n  }\n};\n\nconst play = function () {\n  stop();\n  animationId = window.setInterval(setTime, 1000 / frameRate);\n};\n\nconst startButton = document.getElementById('play');\nstartButton.addEventListener('click', play, false);\n\nconst stopButton = document.getElementById('pause');\nstopButton.addEventListener('click', stop, false);\n\nupdateInfo();\n"],"names":["threeHoursAgo","Date","Math","round","now","extent","transformExtent","startDate","animationId","layers","TileLayer","source","Stamen","layer","TileWMS","attributions","url","params","Map","target","view","View","center","getCenter","zoom","updateInfo","document","getElementById","innerHTML","toISOString","setTime","setMinutes","getMinutes","getSource","updateParams","stop","window","clearInterval","addEventListener","setInterval"],"sourceRoot":""}