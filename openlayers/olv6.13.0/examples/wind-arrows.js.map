{"version":3,"file":"wind-arrows.js","mappings":"+NAWMA,EAAQ,IAAIC,EAAAA,EAAa,CAC7BC,OAAQ,EACRC,OAAQ,EACRC,OAAQ,IAAIC,EAAAA,EAAO,CACjBC,MAAO,EACPC,MAAO,UAETC,gBAAgB,IAGZC,EAAO,IAAIR,EAAAA,EAAa,CAC5BC,OAAQ,EACRC,OAAQ,EACRO,KAAM,IAAIC,EAAAA,EAAK,CACbJ,MAAO,UAETC,gBAAgB,IAGZI,EAAS,CAAC,IAAIC,EAAAA,GAAM,CAACC,MAAOd,IAAS,IAAIa,EAAAA,GAAM,CAACC,MAAOL,KAEvDM,EAAS,IAAIC,EAAAA,EAAa,CAC9BC,aACE,iFAGEC,EAAM,IAAIC,EAAAA,EAAI,CAClBC,OAAQ,CACN,IAAIC,EAAAA,EAAU,CACZN,OAAQ,IAAIO,EAAAA,IAEd,IAAIC,EAAAA,EAAY,CACdR,OAAQA,EACRS,MAAO,SAAUC,GACf,IAAMC,EAAOD,EAAQE,IAAI,QAEnBC,GAAUF,EAAKG,IAAM,KAAOC,KAAKC,GAAM,IACvCC,EAAQN,EAAKO,MAAQ,GAQ3B,OAPAjC,EAAMkC,SAAS,CAAC,EAAGF,IACnBhC,EAAMmC,YAAYP,GAClBnB,EAAK2B,gBAAgB,CACnB,EACA3B,EAAK4B,YAAc,EAAIrC,EAAMqC,YAAcL,IAE7CvB,EAAK0B,YAAYP,GACVhB,MAIb0B,OAAQ,MACRC,KAAM,IAAIC,EAAAA,GAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,MAIVC,MAAM,iCACHC,MAAK,SAAUC,GACd,OAAOA,EAASC,UAEjBF,MAAK,SAAUG,GACd,IAAMC,EAAW,GACjBD,EAAKE,KAAKC,SAAQ,SAAUC,GAC1B,IAAM1B,EAAU,IAAI2B,EAAAA,EAClB,IAAIC,EAAAA,GAAMC,EAAAA,EAAAA,IAAW,CAACH,EAAOI,MAAMC,IAAKL,EAAOI,MAAME,QAEvDhC,EAAQiC,cAAcP,GACtBH,EAASW,KAAKlC,MAEhBV,EAAO6C,YAAYZ,GACnB9B,EAAI2C,UAAUC,IAAI/C,EAAOgD,kB","sources":["webpack:///./wind-arrows.js"],"sourcesContent":["import Feature from '../src/ol/Feature.js';\nimport Map from '../src/ol/Map.js';\nimport OSM from '../src/ol/source/OSM.js';\nimport Point from '../src/ol/geom/Point.js';\nimport TileLayer from '../src/ol/layer/Tile.js';\nimport VectorLayer from '../src/ol/layer/Vector.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport View from '../src/ol/View.js';\nimport {Fill, RegularShape, Stroke, Style} from '../src/ol/style.js';\nimport {fromLonLat} from '../src/ol/proj.js';\n\nconst shaft = new RegularShape({\n  points: 2,\n  radius: 5,\n  stroke: new Stroke({\n    width: 2,\n    color: 'black',\n  }),\n  rotateWithView: true,\n});\n\nconst head = new RegularShape({\n  points: 3,\n  radius: 5,\n  fill: new Fill({\n    color: 'black',\n  }),\n  rotateWithView: true,\n});\n\nconst styles = [new Style({image: shaft}), new Style({image: head})];\n\nconst source = new VectorSource({\n  attributions:\n    'Weather data by <a href=\"https://openweathermap.org/current\">OpenWeather</a>',\n});\n\nconst map = new Map({\n  layers: [\n    new TileLayer({\n      source: new OSM(),\n    }),\n    new VectorLayer({\n      source: source,\n      style: function (feature) {\n        const wind = feature.get('wind');\n        // rotate arrow away from wind origin\n        const angle = ((wind.deg - 180) * Math.PI) / 180;\n        const scale = wind.speed / 10;\n        shaft.setScale([1, scale]);\n        shaft.setRotation(angle);\n        head.setDisplacement([\n          0,\n          head.getRadius() / 2 + shaft.getRadius() * scale,\n        ]);\n        head.setRotation(angle);\n        return styles;\n      },\n    }),\n  ],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2,\n  }),\n});\n\nfetch('data/openweather/weather.json')\n  .then(function (response) {\n    return response.json();\n  })\n  .then(function (data) {\n    const features = [];\n    data.list.forEach(function (report) {\n      const feature = new Feature(\n        new Point(fromLonLat([report.coord.lon, report.coord.lat]))\n      );\n      feature.setProperties(report);\n      features.push(feature);\n    });\n    source.addFeatures(features);\n    map.getView().fit(source.getExtent());\n  });\n"],"names":["shaft","RegularShape","points","radius","stroke","Stroke","width","color","rotateWithView","head","fill","Fill","styles","Style","image","source","VectorSource","attributions","map","Map","layers","TileLayer","OSM","VectorLayer","style","feature","wind","get","angle","deg","Math","PI","scale","speed","setScale","setRotation","setDisplacement","getRadius","target","view","View","center","zoom","fetch","then","response","json","data","features","list","forEach","report","Feature","Point","fromLonLat","coord","lon","lat","setProperties","push","addFeatures","getView","fit","getExtent"],"sourceRoot":""}